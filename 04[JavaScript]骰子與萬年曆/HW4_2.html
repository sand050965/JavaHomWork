<!DOCTYPE html>
<html>
<head>
	<meta charset = "utf-8"/>
	<title>萬年曆</title>
</head>

<body>
	<h3>年月輸入:</h3>

	<table border="1" width="400">
		<tr>
			<td>年:</td>
			<td><input type="text" id="cYear" onkeyup="value=value.replace(/[^\d]/g,'')"/></td>
		</tr>
		<tr>
			<td>月:</td>
			<td><input type="text" id="cMonth" onkeyup="value=value.replace(/[^\d]/g,'')"/></td>
		</tr>
		<tr>
			<td><button id="btn" onclick="Calender()">確定</button></td>
			<td><button id="btn" onclick="Clear()">清除</button></td>
		</tr>
 	</table>

	<p id="yearMonth" ></p>
	<table id="Calender" border="1"></table>

</body>

<script>
	function Calender(){
		var cYear = document.getElementById('cYear').value;
		var cMonth  = document.getElementById('cMonth').value;

		if ((cYear == '' || cYear == undefined) && (cMonth == '' || cMonth == undefined)) {
			alert('請輸入年月份。');
			return;
		}
		
		else if (cYear == '' || cYear == undefined) {
		alert('請輸入年份。');
		return;
		}
		
		else if (cMonth == '' || cMonth == undefined) {
			alert('請輸入月份。');
			return;
		}
		
		
		var ym = document.getElementById("yearMonth");
		ym.innerHTML = cYear + "年 "+ cMonth + "月";
		


		var cTable = document.getElementById("Calender");
		cTable.innerHTML = "";
		
		var row = cTable.insertRow(0);
		var a = row.insertCell(0);
		var b = row.insertCell(1);
		var c = row.insertCell(2);
		var d = row.insertCell(3);
		var e = row.insertCell(4);
		var f = row.insertCell(5);
		var g = row.insertCell(6);

		a.innerHTML = "日";
		b.innerHTML = "一";
		c.innerHTML = "二";
		d.innerHTML = "三";
		e.innerHTML = "四";
		f.innerHTML = "五";
		g.innerHTML = "六";


		var Days = new Date(cYear, cMonth, 0).getDate();		
		var initWeekDay = new Date(cYear, cMonth-1, 1).getDay();
		var cWeek = Math.ceil(Days/7);
		
		console.log(cWeek);
		
		console.log(initWeekDay);	
		
		var init= 1;						

		for (let i = 0; i <= cWeek; i++) {
			if(init <= Days){
				row = cTable.insertRow(-1);
			
				for (let j = 0; j < 7; j++) {
					var a1 = row.insertCell(j);
					if(init<=Days){
						if(init==1 && j==initWeekDay){				
							a1.innerHTML = init;
							init+=1;
						}
						else if(init!=1){
							a1.innerHTML = init;
							init++;				
						}
					}

				}
			

			}

		}

	}



	function Clear(){
		document.getElementById("cYear").value  = "";
		document.getElementById("cYear").innerHTML  = "";
		document.getElementById("cMonth").value  = ""
		document.getElementById("cMonth").innerHTML  = "";
		document.getElementById("yearMonth").innerHTML  = "";
		document.getElementById("Calender").innerHTML  = "";

	}

</script>
</html>